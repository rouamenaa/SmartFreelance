<!-- Page layout: same structure as add form (no card/modal chrome) -->
<ng-container *ngIf="layout === 'page'">
  <div class="edit-form-wrap">
    <form [formGroup]="form" (ngSubmit)="update()">
      <div class="edit-form-body">
        <div class="form-group">
          <label for="edit-projectId" class="form-label">ID Projet</label>
          <input type="number" min="1" class="form-input" id="edit-projectId" formControlName="projectId" placeholder="Ex. 1">
        </div>
        <div class="form-group">
          <label for="edit-freelancerId" class="form-label">ID Freelancer</label>
          <input type="number" min="1" class="form-input" id="edit-freelancerId" formControlName="freelancerId" placeholder="Ex. 1">
        </div>
        <div class="form-group">
          <label for="edit-coverLetter" class="form-label">Lettre de motivation</label>
          <textarea class="form-input form-textarea" id="edit-coverLetter" formControlName="coverLetter" rows="4" placeholder="Décrivez votre expérience et motivation..."></textarea>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="edit-proposedPrice" class="form-label">Prix proposé</label>
            <input type="number" step="0.01" min="0" class="form-input" id="edit-proposedPrice" formControlName="proposedPrice" placeholder="0.00">
          </div>
          <div class="form-group">
            <label for="edit-estimatedDeliveryDays" class="form-label">Jours estimés</label>
            <input type="number" min="1" class="form-input" id="edit-estimatedDeliveryDays" formControlName="estimatedDeliveryDays" placeholder="Ex. 10">
          </div>
        </div>
        <div class="form-group">
          <label for="edit-freelancerRating" class="form-label">Note freelancer (0–5)</label>
          <input type="number" step="0.1" min="0" max="5" class="form-input" id="edit-freelancerRating" formControlName="freelancerRating" placeholder="Optionnel">
        </div>
        <div class="form-group">
          <label for="edit-status" class="form-label">Statut</label>
          <select class="form-input form-select" id="edit-status" formControlName="status">
            <option value="PENDING">En attente</option>
            <option value="ACCEPTED">Acceptée</option>
            <option value="REJECTED">Refusée</option>
          </select>
        </div>
        <p *ngIf="errorhandling" class="form-error">{{ errorhandling }}</p>
      </div>
      <div class="edit-form-actions">
        <button type="button" class="btn btn-secondary" (click)="close()">Annuler</button>
        <button type="submit" class="btn btn-primary" [disabled]="form.invalid">Modifier</button>
      </div>
    </form>
  </div>
</ng-container>

<!-- Modal layout (list view) -->
<ng-container *ngIf="layout === 'modal'">
  <div class="modal-header">
    <h2 class="modal-title fs-5">Modifier candidature</h2>
    <button type="button" class="btn-close" (click)="close()"></button>
  </div>
  <form [formGroup]="form" (ngSubmit)="update()">
    <div class="modal-body">
      <div class="mb-3">
        <label for="projectId" class="form-label">ID Projet</label>
        <input type="number" min="1" class="form-control" id="projectId" formControlName="projectId">
      </div>
      <div class="mb-3">
        <label for="freelancerId" class="form-label">ID Freelancer</label>
        <input type="number" min="1" class="form-control" id="freelancerId" formControlName="freelancerId">
      </div>
      <div class="mb-3">
        <label for="coverLetter" class="form-label">Lettre de motivation</label>
        <textarea class="form-control" id="coverLetter" formControlName="coverLetter" rows="3"></textarea>
      </div>
      <div class="mb-3">
        <label for="proposedPrice" class="form-label">Prix proposé</label>
        <input type="number" step="0.01" min="0" class="form-control" id="proposedPrice" formControlName="proposedPrice">
      </div>
      <div class="mb-3">
        <label for="estimatedDeliveryDays" class="form-label">Jours estimés</label>
        <input type="number" min="1" class="form-control" id="estimatedDeliveryDays" formControlName="estimatedDeliveryDays">
      </div>
      <div class="mb-3">
        <label for="freelancerRating" class="form-label">Note freelancer (0–5)</label>
        <input type="number" step="0.1" min="0" max="5" class="form-control" id="freelancerRating" formControlName="freelancerRating" placeholder="Optionnel">
      </div>
      <div class="mb-3">
        <label for="status" class="form-label">Statut</label>
        <select class="form-select" id="status" formControlName="status">
          <option value="PENDING">En attente</option>
          <option value="ACCEPTED">Acceptée</option>
          <option value="REJECTED">Refusée</option>
        </select>
      </div>
      <h5 class="text-danger">{{ errorhandling }}</h5>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-primary" (click)="close()">Fermer</button>
      <button type="submit" class="btn btn-primary">Modifier</button>
    </div>
  </form>
</ng-container>
